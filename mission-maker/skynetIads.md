---
description: Automatisation et surveillance des rÃ©seau IADS gÃ©rÃ©s par Skynet
---

-----------------------------

Navigation: [page "Mission Maker" du site de documentation VEAF](./index.md)

-----------------------------

ðŸš§ **TRAVAUX EN COURS** ðŸš§

La documentation est en train d'Ãªtre retravaillÃ©e, morceau par morceau. 
En attendant, vous pouvez consulter l'[ancienne documentation](https://github.com/VEAF/VEAF-Mission-Creation-Tools/blob/master/old_documentation/_index.md).

-----------------------------

# Table des matiÃ¨res

- Principes - [ici](#principes)
- Configuration - [ici](#comment-configurer-le-module)
- Exemples - [ici](#exemples-complets)

# Introduction

Le module *SkynetIadsHelper* construit automatiquement des rÃ©seaux IADS Skynet Ã  partir des groupes prÃ©sents dans la mission.  
Le module *SkynetIadsMonitor* offre des outils statiques et dynamiques pour surveiller l'Ã©tat et la composition des rÃ©seaux IADS Skynet.

# Principes

[Synet-IADS](https://github.com/walder/Skynet-IADS) est un script qui pilote les systÃ¨mes radar antiaÃ©riens afin qu'ils optimisent leur survivabilitÃ© et leur lÃ©thalitÃ© en restant Ã©teints le plus possible. Il simule ainsi un IADS (Integrated Air Defence System) dans lequel les EWR (Early Warning Radar) scannent le ciel pour repÃ©rer et surveiller des contacts, et communiquent ces informations aux sites SAM (Surface-to-Air Missile), permettant Ã  ceux-ci de ne s'activer que lorsqu'ils sont en capacitÃ© d'engager un contact.

*Skynet-IADS* change complÃ©tement la maniÃ¨re dont fonctionnent les dÃ©fenses antiaÃ©riennes dans DCS. Il est ainsi quasi indispensable Ã  toute mission qui comporte des radars au sol. Malheureusement, sa configuration nÃ©cÃ©ssite de mettre en place et de maintenir un script dans chaque mission, script dont la complexitÃ© augmente avec la taille de la mission. Les modules VEAF documentÃ©s ici automatisent la construction de ce script et offrent des outils pour consulter et vÃ©rifier les rÃ©seaux ainsi crÃ©Ã©s.

# SkynetIadsHelper

Ce module construit automatiquement des rÃ©seaux IADS Skynet Ã  partir des groupes prÃ©sents dans la mission.  
Pour cela il va parcourir la liste de tous les groupes de la mission, et ajouter ceux qui sont Ã©ligibles dans les rÃ©seaux IADS Skynet. Cette initialisation des rÃ©seaux se fait au dÃ©marrage de la mission (avec un dÃ©lai paramÃ©trable) sur la base des groupes qui existent Ã  ce moment. Les groupes en activation retardÃ©e sont intÃ©grÃ©s, mais pas les groupes qui seront gÃ©nÃ©rÃ©s plus tard par script lors de la vie de la mission.

Le module va toujours crÃ©er deux rÃ©seaux Skynet : un pour la coalition *blue*, un pour la coalition *red*.

## Initialisation

Le module est activÃ© par dÃ©faut dans les templates de mission VEAF.  
L'initialisation se fait sur le modÃ¨le suivant :

```lua
if (veafSkynet) then
    veafSkynet.PointDefenceMode = veafSkynet.PointDefenceModes.Skynet
    veafSkynet.GroupIntegrationMode = veafSkynet.GroupIntegrationModes.Strict
    veafSkynet.DynamicSpawn = false
    veafSkynet.DelayForStartup = 5
    veafSkynet.initialize(
        false, --includeRedInRadio=true
        false, --debugRed
        false, --includeBlueInRadio
        false --debugBlue
    )
end
```
### Fonction `initialize`
La fonction d'initialisation `veafSkynet.initialize` prend des paramÃ¨tres qui seront passÃ©s aux rÃ©seau Skynet gÃ©nÃ©rÃ©s pour leur dire s'ils doivent reporter des informations.

`includeInRadio` ajoute une entrÃ©e radio F10 pour afficher ou masquer l'Ã©tat du rÃ©seau.  
`debug` active l'affichage de l'Ã©tat du rÃ©seau, et des logs dÃ©taillÃ©s sur le comportement de celui-ci.

### Point defences
Le module peut identifier les sites SAM capables d'intercepter des missiles antiradar, et essayer des les affecter en dÃ©fense rapprochÃ©e d'autres Ã©lements du rÃ©seau Ã  proximitÃ©.  
La propriÃ©tÃ© gÃ©nÃ©rale `veafSkynet.PointDefenceMode` pilote cette mÃ©canique. Elle est Ã  positionner avant le `initialize`. Les valeurs possibles sont dÃ©crites dans l'Ã©numeration `veafSkynet.PointDefenceModes` :
- **`None = 0`** : le module n'essayera pas de crÃ©er des Point Defences (**valeur par dÃ©faut**)
- `Skynet = 1` : le module configure les Point Defences avec les mÃ©caniques du script Skynet
- `Dcs = 2` : le module exclue les Point Defences du rÃ©seau IADS Skynet et les laisse aux bons soins de l'IA de DCS (toujours allumÃ©s)

Si la crÃ©ation de dÃ©fenses rapprochÃ©e est souhaitÃ©e, le mode `Skynet` devrait Ãªtre l'option Ã  retenir. Le mode `Dcs` donne la possibilitÃ© d'avoir des dÃ©fenses potentiellement plus efficaces mais aussi plus vulnÃ©rables (car toujours allumÃ©es).

### Mode d'intÃ©gration des groupes
La propriÃ©tÃ© gÃ©nÃ©rale `veafSkynet.GroupIntegrationMode` permet de choisir les critÃ¨res que le module utilise pour dÃ©cider si un groupe DCS doit Ãªtre intÃ©grÃ© dans les rÃ©seaux Skynet. Elle est Ã  positionner avant le `initialize`. Les valeurs possibles sont dÃ©crites dans l'Ã©numeration `veafSkynet.GroupIntegrationModes` :
- `Strict = 0` : seuls les groupes DCS composÃ©s uniquement d'unitÃ©s connues de Skynet sont intÃ©grÃ©s dans les rÃ©seaux IADS
- **`Lenient = 1`** : seuls les groupes DCS composÃ©s de au moins une unitÃ© connue de Skynet sont intÃ©grÃ©s dans les rÃ©seaux IADS (**valeur par dÃ©faut**)

Cette propriÃ©tÃ© a un impact sur l'intÃ©gration des groupes "mixtes" dans les rÃ©seau. Typiquement, un convoi composÃ© de tanks et transports, escortÃ© par des SA-19, sera intÃ©grÃ© en `Lenient` mais pas en `Strict`.

*Un groupe connu de Skynet est en rÃ¨gle gÃ©nÃ©rale un radar, un lanceur, ou une unitÃ© antiaÃ©rienne autonome (AAA, SA-15...)*

### IntÃ©gration dynamique de groupes gÃ©nÃ©rÃ©s en cours de mission
Les rÃ©seaux Skynet construits par `SkynetIadsHelper` sont initialisÃ©s au dÃ©marrage de la mission, sur la base des groupes existants Ã  ce moment (qu'ils soient dÃ©jÃ  prÃ©sents ou en activation retardÃ©e).  
Le module peut aussi surveiller les groupes gÃ©nÃ©rÃ©s au cours du dÃ©roulement de la mission, et les intÃ©grer dans les rÃ©seaux existants quand applicable. L'activation de cette mÃ©canique est pilotÃ©e par la propriÃ©tÃ© gÃ©nÃ©rale `veafSkynet.DynamicSpawn`.
- **`false`** : le module ne surveille pas les gÃ©nÃ©rations de groupes en cours de mission (**valeur par dÃ©faut**)
- `true` : le module surveille les gÃ©nÃ©rations de groupes en cours de mission et les ajoute aux rÃ©seaux Skynet

Cette propriÃ©tÃ© peut Ãªtre modifiÃ©e n'importe quand, permettant d'activer ou dÃ©sactiver la surveillance des unitÃ©s gÃ©nÃ©rÃ©es selon les besoins de la mission.

*Le module VeafSpawn ajoute les unitÃ©s au sol qu'il gÃ©nÃ¨re dans les rÃ©seaux Skynet lorsque cela est applicable. Cette mÃ©canique est dÃ©sactivÃ©e quand `veafSkynet.DynamicSpawn` est Ã  `true`.*

### DÃ©but de l'initialisation
L'initialisation des rÃ©seaux Skynet par le module `SkynetIadsHelper` se fait aprÃ¨s un dÃ©lai qui peut Ãªtre paramÃ©trÃ© avec la propriÃ©tÃ© gÃ©nÃ©rale `veafSkynet.DelayForStartup` (temps d'attend en secondes, par dÃ©faut **1 seconde**). Elle est Ã  positionner avant le `initialize`.

## Centres de commandement et bascule des rÃ©seaux en autonome
Le module propose des outils pour ajouter et dÃ©truire des Command Centers dans les rÃ©seaux Skynet.  
Dans Skynet, un Command Center est une unitÃ© ou un statique dont dÃ©pend le fonctionnement d'un rÃ©seau. Si un rÃ©seau a au moins un Command Center, et que tous ses Command Centers sont dÃ©truits, il ne fonctionne plus et tous ses Ã©lÃ©ments basculent en autonome. Cette mÃ©canique est intÃ©ressante pour donner des objectifs de mission, mais aussi peut donner un moyen simple de dÃ©sactiver un rÃ©seau suite Ã  un Ã©vÃ©nement significatif de la mission.

Les Ã©lements autonomes restent allumÃ©s tout le temps et assurer eux-mÃªmes leur surveillance du ciel. NÃ©anmoins ils bÃ©nÃ©ficient toujours des intelligences fournies par le script Skynet, en particulier ils sont toujours en capacitÃ© d'identifier un HARM et de s'Ã©teindre pour lui Ã©chapper.

`SkynetIadsHelper` incorpore des outils pour maniupler les Command Centers des rÃ©seaux qu'il a construit.

`veafSkynet.addCommandCenterOfCoalition(iCoalitionId, sCommandCenterName)`  
Cette fonction ajoute l'Ã©lement DCS nommÃ© en tant que Command Center pour le rÃ©seau de la coalition. L'objet DCS peut Ãªtre un groupe, une unitÃ© ou un statique.

```lua
veafSkynet.addCommandCenterOfCoalition(coalition.side.RED, "CommandCenterRed")
```

`veafSkynet.destroyCommandCentersOfCoalition(iCoalitionId, iExplosionStrength)`
Cette fonction dÃ©truit (fait exploser) tous les Command Centers pour le rÃ©seau de la coalition. Attention, certains objets DCS ne sont pas destructibles par une unique explosion mÃªme de force maximale, en particulier les bunkers de commandement.

```lua
veafSkynet.destroyCommandCentersOfCoalition(coalition.side.RED)
```

*Skynet IADS propose beaucoup d'autres options pour structurer les rÃ©seaux : noeuds de communication, gÃ©nÃ©rateurs Ã©lectriques, etc. Si le crÃ©ateur de la mission souhaite exploiter ces options, il ne devrait pas passer par `SkynetIadsHelper`, mais construire lui-mÃªme son rÃ©seau manuellement.*

### Exemple d'utilisation pour une bascule en autonome d'un rÃ©seau
Dans cet exemple, on a prÃ©parÃ© dans l'Ã©diteur, dans un recoin inutilisÃ© de la carte :  
- Un groupe `SkynetCommandCenterRed` qui sera utilisÃ© comme modÃ¨le pour gÃ©nÃ©rer des objets Command Center. Un camion qui a peu de points de vie.
- Une zone `SkynetCommandCenterZone`

```lua
local function SkynetNetworkEnable(iCoalition)
    veaf.loggers.get(veafSkynetMonitor.Id):info("SkynetNetworkEnable " .. CoalitionString(iCoalition))
    local veafSkynetNetwork = veafSkynet.getNetwork(veafSkynet.defaultIADS[tostring(iCoalition)])
    local iads = veafSkynetNetwork.iads

	if (#iads:getCommandCenters() > 0 and iads:isCommandCenterUsable()) then
        veaf.loggers.get(veafSkynet.Id):trace("Network is already enabled")
        return
    end

    local sCommandCenterTemplateName = "SkynetCommandCenter" .. CoalitionString(iCoalition)
    local commandCenterTemplate = Group.getByName(sCommandCenterTemplateName)
    if (not commandCenterTemplate) then
        veaf.loggers.get(veafSkynet.Id):trace("Command center template group not found : " .. sCommandCenterTemplateName)
        return
    end

    local commandCenterData = mist.cloneInZone(sCommandCenterTemplateName, "SkynetCommandCenterZone")
    veafSkynet.addCommandCenterOfCoalition(iads:getCoalition(), commandCenterData.name)
    veaf.loggers.get(veafSkynet.Id):trace("Command center added [" .. commandCenterData.name .. "]")
end

local function SkynetNetworkDisable(iCoalition)
    veafSkynet.destroyCommandCentersOfCoalition(iCoalition)
end
```

## DÃ©sactivation d'un rÃ©seau
`veafSkynet.deactivateNetworkOfCoalition(iCoalitionId, elementStates)`

La dÃ©sactivation d'un rÃ©seau Skynet consiste en deux Ã©tapes :
- ArrÃªt du script Skynet pour ce rÃ©seau.
- Bascule de tous les Ã©lÃ©ments du rÃ©seau dans un Ã©tat au choix du mission maker avant de les rendre Ã  l'IA DCS.

Les Ã©tats possibles sont dÃ©crits par la propriÃ©tÃ© gÃ©nÃ©rale `veafSkynet.SkynetElementStates` :
- `Autonomous` : mode autonome selon configuration de chaque Ã©lÃ©ment
- **`Live`** : allume tous les Ã©lÃ©ments (**valeur par dÃ©faut**)
- `Dark` : Ã©teint tous les Ã©lÃ©ments

```lua
veafSkynet.deactivateNetworkOfCoalition(coalition.side.RED)
```

## AccÃ©der aux rÃ©seaux IADS gÃ©nÃ©rÃ©s
Dans certains cas, il peut Ãªtre utile au crÃ©ateur de mission d'accÃ©der aux rÃ©seaux IADS gÃ©nÃ©rÃ©s par `SkynetIadsHelper`. Cela peut se faire uniquement une fois que l'initialisation est terminÃ©e et doit donc Ãªtre fait dans une tÃ¢che parallÃ¨me qui attendra la fin de l'initialisation.

```lua
local assignRedIadsTaskId = nil
local myRedIads = nil

local function AssignRedIadsTask()
    if (not veafSkynet) then
        mist.removeFunction(assignRedIadsTaskId)
        return
    end

    if (veafSkynet.initialized) then
        mist.removeFunction(assignRedIadsTaskId)
        local veafSkynetNetwork = veafSkynet.getNetwork(veafSkynet.defaultIADS[tostring(coalition.side.RED)])
        myRedIads = veafSkynetNetwork.iads
    else
        veaf.loggers.get(veaf.Id):trace("waiting for Skynet IADS helpers to finish initialization")
    end
end

assignRedIadsTaskId = mist.scheduleFunction(AssignRedIadsTask, {}, timer.getTime() + veafSkynet.DelayForStartup + 1, 10)
```

# SkynetIadsMonitor

Le module *SkynetIadsMonitor* offre des outils statiques et dynamiques pour surveiller l'Ã©tat et la composition des rÃ©seaux IADS Skynet. Il permet principalement de construire des descriptifs textuels des rÃ©seaux Skynet, afin de vÃ©rifier leurs structures.

*A complÃ©ter*

# Contacts

Si vous avez besoin d'aide, ou si vous voulez suggÃ©rer quelque chose, vous pouvez :

* contacter **Zip** sur [GitHub][Zip on Github] ou sur [Discord][Zip on Discord]
* aller consulter le [site de la VEAF][VEAF website]
* poster sur le [forum de la VEAF][VEAF forum]
* rejoindre le [Discord de la VEAF][VEAF Discord]


[Badge-Discord]: https://img.shields.io/discord/471061487662792715?label=VEAF%20Discord&style=for-the-badge
[VEAF-logo]: ../images/logo.png?raw=true
[VEAF Discord]: https://www.veaf.org/discord
[Zip on Github]: https://github.com/davidp57
[Zip on Discord]: https://discordapp.com/users/421317390807203850
[VEAF website]: https://www.veaf.org
[VEAF forum]: https://www.veaf.org/forum

[VEAF-Mission-Creation-Tools-repository]: https://github.com/VEAF/VEAF-Mission-Creation-Tools
[VEAF-mission-converter-repository]:https://github.com/VEAF/VEAF-mission-converter
[VEAF-demo-mission-repository]: https://github.com/VEAF/VEAF-Demo-Mission
[VEAF-Open-Training-Mission-repository]: https://github.com/VEAF/VEAF-Open-Training-Mission
[VEAF-Multiplayer-Missions-repository]: https://github.com/VEAF/VEAF-Multiplayer-Missions
[VEAF-Open-Training-Mission-documentation]: https://www.veaf.org/opentraining

[veaf_radio_menu]: ../images/radio_veaf_menu.png
[user_radio_menu]: ../images/radio_user_menu.png
